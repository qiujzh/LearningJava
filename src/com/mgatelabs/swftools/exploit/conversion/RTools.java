package com.mgatelabs.swftools.exploit.conversion;

import java.awt.geom.AffineTransform;
import java.awt.geom.GeneralPath;
import java.awt.geom.PathIterator;

public class RTools {

    public static boolean containsShape(GeneralPath container, GeneralPath object) {
        // Get the objects path
        PathIterator pi = object.getPathIterator(new AffineTransform());

        float coords[] = new float[6];
        int type = 0;
        float x = 0;
        float y = 0;
        boolean skip = false;
        boolean foundOne = false;

        while (!pi.isDone()) {
            // Get type and coords
            type = pi.currentSegment(coords);
            skip = false;

            switch (type) {
                case PathIterator.SEG_CLOSE:
                    skip = true;
                    break;
                case PathIterator.SEG_MOVETO:
                case PathIterator.SEG_LINETO:
                    x = coords[0];
                    y = coords[1];
                    break;
                case PathIterator.SEG_QUADTO:
                    x = coords[2];
                    y = coords[3];
                    break;
                case PathIterator.SEG_CUBICTO:
                    x = coords[4];
                    y = coords[5];
                    break;
                default:
                    skip = true;
                    break;
            }

            if (!skip) {
                // Do i not check
                if (!container.contains(x, y)) {
                    return false;
                } else {
                    // Is there actually a point here?
                    foundOne = true;
                }
            }

            pi.next();
        }

        return foundOne;
    }

}